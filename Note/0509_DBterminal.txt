root@Ubuntu22:~# mysql_secure_installation 

NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB
      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!

In order to log into MariaDB to secure it, we'll need the current
password for the root user. If you've just installed MariaDB, and
haven't set the root password yet, you should just press enter here.

Enter current password for root (enter for none): 
OK, successfully used password, moving on...

Setting the root password or using the unix_socket ensures that nobody
can log into the MariaDB root user without the proper authorisation.

You already have your root account protected, so you can safely answer 'n'.

Switch to unix_socket authentication [Y/n] 
Enabled successfully!
Reloading privilege tables..
 ... Success!


You already have your root account protected, so you can safely answer 'n'.

Change the root password? [Y/n] y
New password: 
Re-enter new password: 
Sorry, passwords do not match.

New password: 
Re-enter new password: 
Password updated successfully!
Reloading privilege tables..
 ... Success!


By default, a MariaDB installation has an anonymous user, allowing anyone
to log into MariaDB without having to have a user account created for
them.  This is intended only for testing, and to make the installation
go a bit smoother.  You should remove them before moving into a
production environment.

Remove anonymous users? [Y/n] y
 ... Success!

Normally, root should only be allowed to connect from 'localhost'.  This
ensures that someone cannot guess at the root password from the network.

Disallow root login remotely? [Y/n] 
 ... Success!

By default, MariaDB comes with a database named 'test' that anyone can
access.  This is also intended only for testing, and should be removed
before moving into a production environment.

Remove test database and access to it? [Y/n] 
 - Dropping test database...
 ... Success!
 - Removing privileges on test database...
 ... Success!

Reloading the privilege tables will ensure that all changes made so far
will take effect immediately.

Reload privilege tables now? [Y/n] 
 ... Success!

Cleaning up...

All done!  If you've completed all of the above steps, your MariaDB
installation should now be secure.

Thanks for using MariaDB!
root@Ubuntu22:~# systemctl status mariadb
● mariadb.service - MariaDB 10.6.16 database server
     Loaded: loaded (/lib/systemd/system/mariadb.service; enabled; vendor prese>
     Active: active (running) since Thu 2024-05-09 13:41:23 KST; 28min ago
       Docs: man:mariadbd(8)
             https://mariadb.com/kb/en/library/systemd/
    Process: 7849 ExecStartPre=/usr/bin/install -m 755 -o mysql -g root -d /var>
    Process: 7850 ExecStartPre=/bin/sh -c systemctl unset-environment _WSREP_ST>
    Process: 7852 ExecStartPre=/bin/sh -c [ ! -e /usr/bin/galera_recovery ] && >
    Process: 7891 ExecStartPost=/bin/sh -c systemctl unset-environment _WSREP_S>
    Process: 7893 ExecStartPost=/etc/mysql/debian-start (code=exited, status=0/>
   Main PID: 7881 (mariadbd)
     Status: "Taking your SQL requests now..."
      Tasks: 9 (limit: 4599)
     Memory: 61.2M
        CPU: 1.244s
     CGroup: /system.slice/mariadb.service
             └─7881 /usr/sbin/mariadbd

 5월 09 13:41:23 Ubuntu22 mariadbd[7881]: Version: '10.6.16-MariaDB-0ubuntu0.22>
 5월 09 13:41:23 Ubuntu22 systemd[1]: Started MariaDB 10.6.16 database server.
 5월 09 13:41:23 Ubuntu22 /etc/mysql/debian-start[7895]: Upgrading MySQL tables>
 5월 09 13:41:23 Ubuntu22 /etc/mysql/debian-start[7898]: Looking for 'mariadb' >
 5월 09 13:41:23 Ubuntu22 /etc/mysql/debian-start[7898]: Looking for 'mariadb-c>
 5월 09 13:41:23 Ubuntu22 /etc/mysql/debian-start[7898]: This installation of M>
 5월 09 13:41:23 Ubuntu22 /etc/mysql/debian-start[7898]: There is no need to ru>
 5월 09 13:41:23 Ubuntu22 /etc/mysql/debian-start[7898]: You can use --force if>
 5월 09 13:41:23 Ubuntu22 /etc/mysql/debian-start[7906]: Checking for insecure >
lines 5-27

root@Ubuntu22:~# systemctl stop mariadb
root@Ubuntu22:~# systemctl status mariadb
○ mariadb.service - MariaDB 10.6.16 database server
     Loaded: loaded (/lib/systemd/system/mariadb.service; enabled; vendor prese>
     Active: inactive (dead) since Thu 2024-05-09 14:12:44 KST; 2s ago
       Docs: man:mariadbd(8)
             https://mariadb.com/kb/en/library/systemd/
    Process: 7849 ExecStartPre=/usr/bin/install -m 755 -o mysql -g root -d /var>
    Process: 7850 ExecStartPre=/bin/sh -c systemctl unset-environment _WSREP_ST>
    Process: 7852 ExecStartPre=/bin/sh -c [ ! -e /usr/bin/galera_recovery ] && >
    Process: 7881 ExecStart=/usr/sbin/mariadbd $MYSQLD_OPTS $_WSREP_NEW_CLUSTER>
    Process: 7891 ExecStartPost=/bin/sh -c systemctl unset-environment _WSREP_S>
    Process: 7893 ExecStartPost=/etc/mysql/debian-start (code=exited, status=0/>
   Main PID: 7881 (code=exited, status=0/SUCCESS)
     Status: "MariaDB server is down"
        CPU: 1.330s

 5월 09 14:12:44 Ubuntu22 systemd[1]: Stopping MariaDB 10.6.16 database server.>
 5월 09 14:12:44 Ubuntu22 mariadbd[7881]: 2024-05-09 14:12:44 0 [Note] InnoDB: >
 5월 09 14:12:44 Ubuntu22 mariadbd[7881]: 2024-05-09 14:12:44 0 [Note] InnoDB: >
 5월 09 14:12:44 Ubuntu22 mariadbd[7881]: 2024-05-09 14:12:44 0 [Note] InnoDB: >
 5월 09 14:12:44 Ubuntu22 mariadbd[7881]: 2024-05-09 14:12:44 0 [Note] InnoDB: >
 5월 09 14:12:44 Ubuntu22 mariadbd[7881]: 2024-05-09 14:12:44 0 [Note] InnoDB: >
 5월 09 14:12:44 Ubuntu22 mariadbd[7881]: 2024-05-09 14:12:44 0 [Note] /usr/sbi>
 5월 09 14:12:44 Ubuntu22 systemd[1]: mariadb.service: Deactivated successfully.
 5월 09 14:12:44 Ubuntu22 systemd[1]: Stopped MariaDB 10.6.16 database server.
 5월 09 14:12:44 Ubuntu22 systemd[1]: mariadb.service: Consumed 1.330s CPU time.
lines 3-25/25 (END)

root@Ubuntu22:~# systemctl start mariadb
root@Ubuntu22:~# systemctl status mariadb
● mariadb.service - MariaDB 10.6.16 database server
     Loaded: loaded (/lib/systemd/system/mariadb.service; enabled; vendor prese>
     Active: active (running) since Thu 2024-05-09 14:13:01 KST; 1s ago
       Docs: man:mariadbd(8)
             https://mariadb.com/kb/en/library/systemd/
    Process: 8739 ExecStartPre=/usr/bin/install -m 755 -o mysql -g root -d /var>
    Process: 8740 ExecStartPre=/bin/sh -c systemctl unset-environment _WSREP_ST>
    Process: 8742 ExecStartPre=/bin/sh -c [ ! -e /usr/bin/galera_recovery ] && >
    Process: 8782 ExecStartPost=/bin/sh -c systemctl unset-environment _WSREP_S>
    Process: 8784 ExecStartPost=/etc/mysql/debian-start (code=exited, status=0/>
   Main PID: 8771 (mariadbd)
     Status: "Taking your SQL requests now..."
      Tasks: 12 (limit: 4599)
     Memory: 61.0M
        CPU: 628ms
     CGroup: /system.slice/mariadb.service
             └─8771 /usr/sbin/mariadbd

 5월 09 14:13:01 Ubuntu22 mariadbd[8771]: Version: '10.6.16-MariaDB-0ubuntu0.22>
 5월 09 14:13:01 Ubuntu22 systemd[1]: Started MariaDB 10.6.16 database server.
 5월 09 14:13:01 Ubuntu22 /etc/mysql/debian-start[8786]: Upgrading MySQL tables>
 5월 09 14:13:01 Ubuntu22 /etc/mysql/debian-start[8789]: Looking for 'mariadb' >
 5월 09 14:13:01 Ubuntu22 /etc/mysql/debian-start[8789]: Looking for 'mariadb-c>
 5월 09 14:13:01 Ubuntu22 /etc/mysql/debian-start[8789]: This installation of M>
 5월 09 14:13:01 Ubuntu22 /etc/mysql/debian-start[8789]: There is no need to ru>
 5월 09 14:13:01 Ubuntu22 /etc/mysql/debian-start[8789]: You can use --force if>
 5월 09 14:13:01 Ubuntu22 /etc/mysql/debian-start[8797]: Checking for insecure >
 5월 09 14:13:01 Ubuntu22 /etc/mysql/debian-start[8801]: Triggering myisam-reco>
lines 6-28/28 (END)

root@Ubuntu22:~# mysql -u root -p
Enter password: 
Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MariaDB connection id is 31
Server version: 10.6.16-MariaDB-0ubuntu0.22.04.1 Ubuntu 22.04

Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

MariaDB [(none)]> show databases
    -> ;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| sys                |
+--------------------+
4 rows in set (0.001 sec)

MariaDB [(none)]> ;;
ERROR: No query specified

ERROR: No query specified

MariaDB [(none)]> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| sys                |
+--------------------+
4 rows in set (0.000 sec)

MariaDB [(none)]> use mysql;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
MariaDB [mysql]> create database netflixdb;
Query OK, 1 row affected (0.000 sec)

MariaDB [mysql]> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| netflixdb          |
| performance_schema |
| sys                |
+--------------------+
5 rows in set (0.000 sec)

MariaDB [mysql]> use netflixdb;
Database changed
MariaDB [netflixdb]> use mysql
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
MariaDB [mysql]> create user 'netflix'@'localhost' identified by '@ai1234@'
    -> ;
Query OK, 0 rows affected (0.001 sec)

MariaDB [mysql]> create user 'netflix'@'%' identified by '@ai1234@'
    -> ;
Query OK, 0 rows affected (0.002 sec)

MariaDB [mysql]> exit
Bye
root@Ubuntu22:~# mysql -u netflix -p netflixdb
Enter password: 
Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MariaDB connection id is 33
Server version: 10.6.16-MariaDB-0ubuntu0.22.04.1 Ubuntu 22.04

Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

MariaDB [netflixdb]> ex
    -> ;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'ex' at line 1
MariaDB [netflixdb]> ^DBye
root@Ubuntu22:~# nano /etc/mysql/mariadb.conf.d/50-server.cnf 
root@Ubuntu22:~# cnf /etc/mysql/mariadb.conf.d/50-server.cnf 
Command 'cnf' not found, did you mean:
  command 'cnt' from deb open-infrastructure-container-tools (20211231-1build1)
  command 'caf' from deb libcoarrays-mpich-dev (2.9.2-3)
  command 'caf' from deb libcoarrays-openmpi-dev (2.9.2-3)
  command 'dnf' from deb dnf (4.5.2-6)
Try: apt install <deb name>
root@Ubuntu22:~# nano /etc/mysql/mariadb.conf.d/50-server.cnf 
root@Ubuntu22:~# systemctl restart mariadb
root@Ubuntu22:~# systemctl restart mariadb
root@Ubuntu22:~# nano /etc/mysql/mariadb.conf.d/50-server.cnf 
root@Ubuntu22:~# cd /var/lib/mysql
root@Ubuntu22:/var/lib/mysql# pwd
/var/lib/mysql
root@Ubuntu22:/var/lib/mysql# ls
aria_log.00000001  ib_buffer_pool  multi-master.info   performance_schema
aria_log_control   ibdata1         mysql               sys
ddl_recovery.log   ib_logfile0     mysql_upgrade_info
debian-10.6.flag   ibtmp1          netflixdb
root@Ubuntu22:/var/lib/mysql# history
    1  pwd
    2  sudo nano /etc/default/locale
    3  exit
    4  ex
    5  sudo
    6  clear
    7  pwd
    8  cd /etc/default/locale
    9  sudo nano /etc/default/locale
   10  sudo locale-gen --purge
   11  sudo nano /etc/default/locale
   12  sudo reboot
   13  apt-get update 
   14  apt-get upgrade 
   15  ufw allow 22
   16  ufw allow 80
   17  ufw allow 8080
   18  ufw allow 8000
   19  ufw allow 3306
   20  apt-get install openssh-server 
   21  exit 
   22  apt install python3-pip
   23  pip list
   24  exit
   25  apt install python3.10-venv
   26  exit
   27  history
   28  exit
   29  apt update
   30  clear
   31  apt install mariadb-server
   32  apt install mariadb-client
   33  clear
   34  mysql_secure_installation 
   35  systemctl status mariadb
   36  systemctl stop mariadb
   37  systemctl status mariadb
   38  systemctl start mariadb
   39  systemctl status mariadb
   40  mysql -u root -p
   41  mysql -u netflix -p netflixdb
   42  nano /etc/mysql/mariadb.conf.d/50-server.cnf 
   43  cnf /etc/mysql/mariadb.conf.d/50-server.cnf 
   44  nano /etc/mysql/mariadb.conf.d/50-server.cnf 
   45  systemctl restart mariadb
   46  nano /etc/mysql/mariadb.conf.d/50-server.cnf 
   47  cd /var/lib/mysql
   48  pwd
   49  ls
   50  history
